var EventEmitter = require('events').EventEmitter;
var check = function(req){
	//if (!User) throw 'Exception: User is not defined,check activeRecord moudles';
	//var finder = User.findByAccount(account);
	//finder.on('end',function(result){
	//	var crypto = require('crypto');
	//	var shasum = crypto.createHash('sha1');
	//	pwd = shasum.update(password);
	//	checkAuth.emit('end',result[0].password === pwd);
	//});
	checkAuth.emit('end',req.session.name);
}
require('eventInject').inject(check);
exports.checkAuth = check;